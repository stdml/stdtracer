#pragma once
#include <stdtracer.hpp>

// #define TRACE(name) default_tracer_t _((name), default_tracer_ctx)
#define TRACE(name)                                                            \
    default_tracer_t _((name), default_simple_ctx, default_log_ctx)

#define _TRACE_WITH_NAME(name, e)                                              \
    {                                                                          \
        default_tracer_t _(name, default_simple_ctx, default_log_ctx);         \
        e;                                                                     \
    }

#define TRACE_IT(e) _TRACE_WITH_NAME(#e, e);

#define TRACE_NAME(name, e) _TRACE_WITH_NAME(std::string(#e "::") + name, e);

#define SET_TRACE_LOG(name)                                                    \
    set_trace_log_t<log_tracer_ctx_t> ___((name), default_log_ctx)
