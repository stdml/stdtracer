#pragma

#include <bits/stdtracer_scope.hpp>
#include <bits/stdtracer_stack_ctx.hpp>
#include <tracer.hpp>

#define TRACE(name) tracer_t _((name), default_tracer_ctx)

#define _TRACE_WITH_NAME(name, e)                                              \
    {                                                                          \
        tracer_t _(name, default_tracer_ctx);                                  \
        e;                                                                     \
    }

#define TRACE_IT(e) _TRACE_WITH_NAME(#e, e);

#define TRACE_NAME(name, e) _TRACE_WITH_NAME(std::string(#e "::") + name, e);

#define SET_TRACE_LOG(name) set_trace_log_t ___(name)
